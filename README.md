# test-001

тестовое задание для B2B.CASH
============


***задача:*** 

Реализовать АПИ для приложения “Каталог рецептов”, разрешается использовать микрофрэймворки (psr7 middleware,Lumen, Silex, Slim), АПИ желательно должно соответствовать РЕСТ стандартам, за исключением некоторых методов которые можно реализовать в виде RPC.
АПИ должно давать возможность создать юзера, залогиниться, создавать, редактировать и удалять от лица этого юзера рецепты, так же обязательным полем у рецепта является фотография, следовательно нужно АПИ для загрузки фотографий. Для реализации самого АПИ и сопутствующего ему функционала запрещается использовать библиотеки.
СУБД: PostgreSql
Версия PHP: 7.x

***дополнительно:***

- реализовать клиентскую часть для загрузки изображений для рецептов.
- каждый рецепт может иметь несколько изображений.



описание решения:
----------

выделим следующие сущности и операции над ними:

    пользователь [создаем, редактируем, удаляем]
    
    рецепт [создаем, редактируем, удаляем]
    
    фотография (к рецепту) [создаем, удаляем]
    
    авторизованная сессия [создаем, удаляем, проверяем]

взаимодействие с API реализовываем по стандарту REST и дублируем функционал по JSON-RPC (для универсальности)

Для тестирования делаем клиентскую часть на JavaScript, взаимосвязь с API по REST (при необходимости могу переделать на JSON-RPC, сейчас просто не успею оба метода )


будем считать что на web-сервере подключен модуль `mod_rewrite`, тогда исходя из этого мы будем рассматривать входящие запросы в следующем формате:

{protokol}://{site_uri}/{api_dir}/{resource_name}/{resource_param1}/../{resource_paramN}?par1=val1&..&parN=valN

описание интерфейса
------

## GET
**GET   /API/users**           - _список всех пользователей_

**GET   /API/users/{user_id}**  - _детально профиль пользователя_

**GET   /API/recipes**          - _список рецептов_

**GET   /API/recipes/{recipe_id}**  - _детально описание рецепта_

**GET   /API/authorise**          - _проверка на авторизацию_

-----

## POST
**POST   /API/users**           - _добавить нового пользователя_

**POST   /API/recipes**          - _добавить новый рецепт_

**POST   /API/photos/{recipe_id}**  - добавить фото к рецепту

**POST   /API/authorise**          - авторизация (создание авторизованной сессии

------

## PUT
**PUT   /API/users/{user_id}**   - _редактировать пользователя_

**PUT   /API/recipes/{recipe_id}**  - _редактировать рецепт_

-------

## DELETE
**DELETE   /API/users/{user_id}**        - _удалить пользователя_

**DELETE   /API/recipes/{recipe_id}**    - _удалить рецепт_

**DELETE   /API/photos/{photo_id}**      - _удалить фото_

**DELETE   /API/authorise/{user_id}**     - завершить сеанс пользователя

------

